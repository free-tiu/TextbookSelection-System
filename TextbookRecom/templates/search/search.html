{% extends 'base_search.html' %}
{% load static %}
{% block title %}教材选用系统 - 教材搜索结果列表{% endblock %}

{% block content %}
<div class="conteiner">

    <div class="search_result" >
        <a>" {{ query }} "  搜索结果如下：</a>
    </div>

    <!-- 教材根据默认条件 和 特定条件展示 -->
    <div class="tbooklist">
        <!-- 图书展示列表 使用遍历将教材展示到页面中  样式在webDemo -->
        {% for book in page %}
            <div class="tbookli" >
                <a href="{{ book.object.b_href }}">
                    <p>
                        <img src="{{ book.object.src }}"  alt onerror="this.src='#'" />
                    </p>

                </a>
                <p class="p1" title="{{ book.object.name }}">{{ book.object.name }}</p>
                <p class="p2">
                    作者：{{ book.object.author }}
                </p>
                <p class="p3">出版社：{{ book.object.press }}</p>
                <p class="p3">出版时间：{{ book.object.date }}</p>

                <div class="db">
                    <div class="comment">{{ book.object.comment }}条评论</div>     <!-- 显示评论数 -->
                    <div class="comment">好评率{{ book.object.praise }}%</div>
                    <div class="comment">价格：{{ book.object.price }}</div>
                </div>
            </div>

        {% endfor %}

    </div>

    <!-- 分页页码 -->
    <div class="footer-1">  {# 在webdemo #}
        <ul>
            {% if page.has_previous %}    {# 判断如果有上一页 #}
                <li class="long">
                    <a href="/search?q={{query}}&page={{ page.previous_page_number }}">上一页</a>
                </li>
            {% endif %}
            {% for num in page.paginator.page_range %}
                {% if num == 1 %}   <!--第一页-->
                    <li class="active">
                        <a href="/search?q={{query}}&page={{ num }}">{{ num }}</a>
                    </li>
                {% elif num == 2 %}   <!--第二页-->
                    <li class="active">
                        <a href="/search?q={{query}}&page={{ num }}">{{ num }}</a>
                    </li>
                {% elif num == 3 %}   <!--第三页-->
                    <li class="active">
                        <a href="/search?q={{query}}&page={{ num }}">{{ num }}</a>
                    </li>
                {% endif %}
            {% endfor %}

            {% if page.has_next %}     {# 判断如果有下一页 #}
                <li class="long">
                    <a href="/search?q={{query}}&page={{ page.next_page_number }}">下一页</a>
                </li>
            {% endif %}
        </ul>
    </div>
    {# 猜你喜欢 #}
    <div class="guess">
        <div class="guess-text">猜你喜欢</div>
        <div  class="tbooklist">
        <h6>按好评率推荐</h6>
        {% for book in guess.praise %}
            <div class="tbookli" >
                <a href="{{ book.b_href }}">
                    <p>
                        <img src="{{ book.src }}"  alt onerror="this.src='#'" />
                    </p>
                    <p class="p1" title="{{ book.name }}">{{ book.name }}</p>
                    <p class="p2">
                        作者：{{ book.author }}
                    </p>
                    <p class="p3">出版社：{{ book.press }}</p>
                    <p class="p3">出版时间：{{ book.date }}</p>
                </a>

                <div class="db">
                    <div class="comment">{{ book.comment }}条评论</div>     <!-- 显示评论数 -->
                    <div class="comment">好评率{{ book.praise }}%</div>
                    <div class="comment">价格：{{ book.price }}</div>
                </div>
            </div>

        {% endfor %}
        </div>
    <div  class="tbooklist">
        <h6>按评论数推荐</h6>
        {% for book in guess.comment %}
            <div class="tbookli" >
                <a href="{{ book.b_href }}">
                    <p>
                        <img src="{{ book.src }}"  alt onerror="this.src='#'" />
                    </p>
                    <p class="p1" title="{{ book.name }}">{{ book.name }}</p>
                    <p class="p2">
                        作者：{{ book.author }}
                    </p>
                    <p class="p3">出版社：{{ book.press }}</p>
                    <p class="p3">出版时间：{{ book.date }}</p>
                </a>

                <div class="db">
                    <div class="comment">{{ book.comment }}条评论</div>     <!-- 显示评论数 -->
                    <div class="comment">好评率{{ book.praise }}%</div>
                    <div class="comment">价格：{{ book.price }}</div>
                </div>
            </div>

        {% endfor %}
        </div>
    <div  class="tbooklist">
        <h6>按价格推荐</h6>
        {% for book in guess.price %}
            <div class="tbookli" >
                <a href="{{ book.b_href }}">
                    <p>
                        <img src="{{ book.src }}"  alt onerror="this.src='#'" />
                    </p>
                    <p class="p1" title="{{ book.name }}">{{ book.name }}</p>
                    <p class="p2">
                        作者：{{ book.author }}
                    </p>
                    <p class="p3">出版社：{{ book.press }}</p>
                    <p class="p3">出版时间：{{ book.date }}</p>
                </a>

                <div class="db">
                    <div class="comment">{{ book.comment }}条评论</div>     <!-- 显示评论数 -->
                    <div class="comment">好评率{{ book.praise }}%</div>
                    <div class="comment">价格：{{ book.price }}</div>
                </div>
            </div>

        {% endfor %}
        </div>
    </div>

</div>

<div class="index-buttom">
    <div>
        @2021 - 2022&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Zhao
    </div>
</div>
{% endblock %}
